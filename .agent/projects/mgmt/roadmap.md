# MGMT ERP â€” é¡¹ç›®è§„åˆ’è·¯çº¿å›¾

> **Agent ç”¨æ­¤æ–‡ä»¶åˆ¤æ–­: å½“å‰åœ¨å“ªä¸ªé˜¶æ®µ, éœ€è¦åŠ è½½å“ªäº›å®æ–½æ–¹æ¡ˆã€‚**
> **ç”¨æˆ·å¯éšæ—¶æ›´æ–°é˜¶æ®µçŠ¶æ€ã€‚**

---

## é˜¶æ®µæ€»è§ˆ

```
Phase 1-3    Phase 4       Phase 5       Phase 6         Phase 7          Phase 8
åŸºç¡€æ¶æ„      ç”¨æˆ·ç®¡ç†       äº§å“ç®¡ç†       VMA æ¨¡å—        V2â†’V3 è¿ç§»       è¾…åŠ©æ¨¡å— + V2 é€€å½¹
â”â”â”â”â”â”â”â”     â”â”â”â”â”â”â”      â”â”â”â”â”â”â”      â”â”â”â”â”â”â”         â”â”â”â”â”â”â”â”        â”â”â”â”â”â”â”
âœ… å®Œæˆ       âœ… å®Œæˆ        âœ… å®Œæˆ       ğŸ”„ è¿›è¡Œä¸­        ğŸ”„ è¿›è¡Œä¸­         ğŸ“‹ å¾…åš
```

---

## Phase 1-3: åŸºç¡€æ¶æ„ âœ…

| äº¤ä»˜ç‰© | çŠ¶æ€ |
|--------|------|
| V2 Monorepo (NestJS + Next.js + Prisma) | âœ… |
| PostgreSQL + Redis | âœ… |
| è®¤è¯/JWT/Session | âœ… |
| i18n (next-intl, è‹±+ä¸­) | âœ… |
| Apple Design ä¸»é¢˜ç³»ç»Ÿ | âœ… |
| å®¡è®¡æ—¥å¿—å››è¡¨ | âœ… |

**éœ€è¦çš„å®æ–½æ–¹æ¡ˆ**: æ—  (å·²å®Œæˆ)

---

## Phase 4: ç”¨æˆ·ç®¡ç† âœ…

| äº¤ä»˜ç‰© | çŠ¶æ€ |
|--------|------|
| ç”¨æˆ· CRUD + RBAC | âœ… |
| L1-L4 å®‰å…¨ç­‰çº§ | âœ… |
| åŠ¨æ€æƒé™æ‰§è¡Œ (PermissionsGuard) | âœ… |
| Redis é”å®šç­–ç•¥ | âœ… |
| Superuser God Mode | âœ… |

**éœ€è¦çš„å®æ–½æ–¹æ¡ˆ**: `playbooks/security.md`

---

## Phase 5: äº§å“ç®¡ç† âœ…

| äº¤ä»˜ç‰© | çŠ¶æ€ |
|--------|------|
| äº§å“ CRUD + SKU + æ¡ç  | âœ… |
| æˆæœ¬/è¿è´¹/é‡é‡ç®¡ç† | âœ… |
| macOS dense table UI | âœ… |
| Legacy MySQL æ•°æ®å¯¹é½ | âœ… |

**éœ€è¦çš„å®æ–½æ–¹æ¡ˆ**: æ—  (å·²å®Œæˆ)

---

## Phase 6: VMA æ¨¡å— ğŸ”„ è¿›è¡Œä¸­

> **å½“å‰æ´»è·ƒé˜¶æ®µ â€” Agent è¿›å…¥ VMA ä»»åŠ¡æ—¶åŠ è½½ `playbooks/vma.md`**

| å­é˜¶æ®µ | äº¤ä»˜ç‰© | çŠ¶æ€ |
|--------|--------|------|
| 6.1 | VMA Hub é¡µé¢ (iPad é£æ ¼) | âœ… |
| 6.2 | å‘˜å·¥ç®¡ç† (CRUD + éƒ¨é—¨ + å²—ä½) | âœ… |
| 6.3 | åŸ¹è®­ SOP ç®¡ç† (ç‰ˆæœ¬æ§åˆ¶) | âœ… |
| 6.4 | åŸ¹è®­è®°å½• + åˆè§„è·¯çº¿å›¾ | âœ… |
| 6.5 | P-Valve åº“å­˜ | âœ… |
| 6.6 | Delivery System åº“å­˜ | âœ… |
| 6.7 | Demo åº“å­˜ | âœ… |
| 6.8 | ä¸´åºŠæ¡ˆä¾‹ç®¡ç† | âœ… |
| **6.9** | **å¤šå²—ä½æ•°æ®æ¨¡å‹é‡æ„ (å¤šå¯¹å¤š)** | **ğŸ”„ è¿›è¡Œä¸­** |
| 6.10 | VMA åç«¯æ‹†åˆ† (å­æ¨¡å—åŒ–) | ğŸ“‹ å¾…åš |
| 6.11 | React Query é›†æˆ | ğŸ“‹ å¾…åš |

### Phase 6 éœ€è¦åŠ è½½çš„å®æ–½æ–¹æ¡ˆ

| å®æ–½æ–¹æ¡ˆ | æ ¸å¿ƒå†…å®¹ | L1 é€šç”¨ SOP |
|------|----------|---------| 
| `playbooks/vma.md` | VMA æ¨¡å—çš„å®Œæ•´å®æ–½æ–¹æ¡ˆ | backend, frontend, data |

---

## Phase 7: V2â†’V3 è¿ç§» ğŸ”„ è¿›è¡Œä¸­

> **V3 éª¨æ¶å·²æ­å»º, æ ¸å¿ƒæ¨¡å—å·²è¿ç§»ã€‚ä¸ Phase 6 å¹¶è¡Œæ¨è¿›ã€‚**
> **Agent è¿›å…¥è¿ç§»ä»»åŠ¡æ—¶åŠ è½½ `playbooks/migration.md`**

| å­é˜¶æ®µ | äº¤ä»˜ç‰© | çŠ¶æ€ |
|--------|--------|------|
| 7.0 | Kotlin + Spring Boot é¡¹ç›®éª¨æ¶ (`mgmt-v3/`) | âœ… |
| 7.1 | Flyway åŸºçº¿ (ä» Prisma å¯¼å‡º `V1__baseline.sql`) | âœ… |
| 7.2 | Auth æ¨¡å—è¿ç§» (JWT + L0-L4 å®‰å…¨ç ) | âœ… |
| 7.3 | Users æ¨¡å—è¿ç§» (CRUD + RBAC + æƒé™ç™½åå•) | âœ… |
| 7.4 | Products æ¨¡å—è¿ç§» (SKU + COGS + @SecurityLevel) | âœ… |
| 7.5 | VMA æ¨¡å—è¿ç§» (5 å­æ¨¡å—: å‘˜å·¥/åŸ¹è®­/åº“å­˜/ä¸´åºŠ/ç«™ç‚¹) | âœ… |
| 7.6 | Logs æ¨¡å—è¿ç§» (4 è¡¨æ—¥å¿—) | âœ… |
| 7.7 | å®‰å…¨å­ç³»ç»ŸåŠ å›º (RequestBodyCachingFilter + åŠ¨æ€ç™½åå•) | âœ… |
| 7.8 | API Gateway æµé‡åˆ‡æ¢ (V2â†’V3) | ğŸ“‹ å¾…åš |
| 7.9 | V2 NestJS é€€å½¹ | ğŸ“‹ å¾…åš |

### Phase 7 éœ€è¦åŠ è½½çš„å®æ–½æ–¹æ¡ˆ

| å®æ–½æ–¹æ¡ˆ | æ ¸å¿ƒå†…å®¹ | L1 é€šç”¨ SOP |
|------|----------|---------| 
| `playbooks/migration.md` | V2â†’V3 è¿ç§»å®æ–½æ–¹æ¡ˆ | backend, data, infrastructure |

### Phase 7 éœ€è¦æŸ¥é˜…çš„å‚è€ƒ

| å‚è€ƒ | ä½•æ—¶ |
|------|------|
| `reference/v3-architecture.md` | æ¶æ„å†³ç­–æ—¶ |
| `reference/migration.md` | è¿ç§»é¡ºåºå’Œçº¦æŸ (å« Appendix A/B: V1+V2 è¯¦ç»†å¯¹ç…§) |

---

## Phase 8: V1 â†’ V3 ä¸šåŠ¡æ¨¡å—è¿ç§» ğŸ”„ è¿›è¡Œä¸­

> **ç­–ç•¥: æ•°æ®åº“å…ˆè¡Œ â€” å…¨é‡å»ºè¡¨+è¿ç§»æ•°æ®, ç„¶åé€æ¨¡å—å†™ä»£ç **
> **V1 æŒç»­è¿è¡Œ=çœŸç›¸æº, PG æ•°æ®éšæ—¶å¯ä» V1 é‡å»º**
> **Agent è¿›å…¥è¿ç§»ä»»åŠ¡æ—¶åŠ è½½ `data/plans/phase8-v1-to-v3-migration.md`**

| å­é˜¶æ®µ | äº¤ä»˜ç‰© | å¤æ‚åº¦ | å·¥æœŸ | çŠ¶æ€ |
|--------|--------|--------|------|------|
| **8.0** | **æ•°æ®åº“å…ˆè¡Œ: PG 20è¡¨å»ºè¡¨ + å…¨é‡æ•°æ®è¿ç§» (202,030 è¡Œ)** | **â˜…â˜…â˜…** | **1å¤©** | âœ… |
| 8.1 | Purchase Kotlin ä»£ç  (ä¾›åº”å•†/PO/å‘è´§/æ”¶è´§/ä»˜æ¬¾) | â˜…â˜…â˜…â˜…â˜… | 3-4å‘¨ | ğŸ”„ åç«¯âœ… 55æµ‹è¯•é€šè¿‡ |
| 8.2 | Finance Kotlin ä»£ç  (ç»Ÿä¸€ä»˜æ¬¾ + åˆ°å²¸ä»·) | â˜…â˜…â˜…â˜… | 2-3å‘¨ | ğŸ“‹ |
| 8.3 | Sales ETL Kotlin ä»£ç  (Spring Batch + å¼ºç±»å‹) | â˜…â˜…â˜…â˜…â˜… | 3-4å‘¨ | ğŸ“‹ |
| 8.4 | FIFO Engine Kotlin ä»£ç  (åŸå­äº‹åŠ¡ + åŒè·‘éªŒè¯) | â˜…â˜…â˜…â˜…â˜… | 2-3å‘¨ | ğŸ“‹ |
| 8.5 | Inventory Kotlin ä»£ç  (ç›˜ç‚¹+ä»“ä½) | â˜…â˜…â˜… | 1-2å‘¨ | ğŸ”„ åç«¯âœ… 16æµ‹è¯•é€šè¿‡ |

### Phase 8.0 äº¤ä»˜ç‰© (2026-02-17 å®Œæˆ)

```
ğŸ“‹ äº¤ä»˜é—¸é—¨:
â”œâ”€â”€ [x] Flyway V3+V4 å»ºè¡¨å®Œæˆ (20 å¼ æ–°è¡¨ + 11 ä¸ª ENUM + ç‰©åŒ–è§†å›¾ + å®¡è®¡è§¦å‘å™¨)
â”œâ”€â”€ [x] ğŸ”´ æ•°æ®è¿ç§» 202,030 è¡Œå…¨éƒ¨æˆåŠŸ (18.5 ç§’)
â”œâ”€â”€ [x] ğŸ”´ é€è¡¨éªŒè¯ 17/17 âœ… ALL CHECKS PASSED
â”œâ”€â”€ [x] ğŸ”´ ç±»å‹å‡çº§å®Œæˆ (TEXTâ†’å¼ºç±»å‹, DOUBLEâ†’DECIMAL, TINYINTâ†’BOOLEAN, datetimeâ†’TIMESTAMPTZ)
â”œâ”€â”€ [x] V1 æ•°æ®é›¶ä¸¢å¤± (V1 = V3 è¡Œæ•°å®Œå…¨ä¸€è‡´)
â”œâ”€â”€ [x] Flyway å†å²å·²åŒæ­¥ (V0-V4)
â”œâ”€â”€ [x] è¿ç§»è„šæœ¬å¹‚ç­‰ (TRUNCATE CASCADE + é‡è·‘)
â””â”€â”€ [x] Data_Inventory å®½è¡¨â†’é•¿è¡¨è½¬æ¢ (25 date columns â†’ stocktakes + stocktake_items)
```

| äº¤ä»˜æ–‡ä»¶ | ç”¨é€” |
|---------|------|
| `V3__inventory_module.sql` | V3 PostgreSQL schema (å·²æ‰§è¡Œ) |
| `V4__warehouse_locations.sql` | ä»“ä½è¡¨ (å·²æ‰§è¡Œ) |
| `scripts/migrate_v1_to_v3.py` | å¹‚ç­‰æ•°æ®è¿ç§»è„šæœ¬ |
| `data/audits/v3-column-traceability-matrix.md` | é€åˆ—è¿½è¸ªçŸ©é˜µ |
| `data/plans/phase8-v1-to-v3-migration.md` | Phase 8 æ‰§è¡Œè®¡åˆ’ |

**æ€»å·¥æœŸ**: 12-18 å‘¨ (3-4.5 ä¸ªæœˆ)  
**æ•°æ®è¿ç§»**: 51 è¡¨ â†’ 20 V3 æ–°è¡¨ (202,030 è¡Œ)

### Phase 8 éœ€è¦åŠ è½½çš„å®æ–½æ–¹æ¡ˆ

| å®æ–½æ–¹æ¡ˆ | æ ¸å¿ƒå†…å®¹ | L1 é€šç”¨ SOP |
|------|----------|---------| 
| `data/plans/phase8-v1-to-v3-migration.md` | V1â†’V3 å…¨æ¨¡å—è¿ç§»æ‰§è¡Œè®¡åˆ’ (æ•°æ®åº“å…ˆè¡Œç­–ç•¥) | backend, data, infrastructure |
| `playbooks/migration.md` | è¿ç§»çº¦æŸ + FIFO é”å®šè§„åˆ™ | backend, data |

### Phase 8 éœ€è¦æŸ¥é˜…çš„å‚è€ƒ

| å‚è€ƒ | ä½•æ—¶ |
|------|------|
| `reference/v3-architecture.md` | æ¶æ„å†³ç­–æ—¶ |
| `reference/migration.md` (Appendix A) | V1 è¡¨ç»“æ„æ˜ å°„æ—¶ |
| `data/audits/v2-database-complete-audit.md` | æ¯ä¸ªå­é˜¶æ®µçš„ DDL åŸºå‡† |
| `reference/kafka-design.md` | Kafka topic è®¾è®¡æ—¶ |
| `reference/search-analytics.md` | OpenSearch/ClickHouse è®¾è®¡æ—¶ |

---

*MGMT Roadmap v2.2 â€” 2026-02-17*
*çŠ¶æ€æ›´æ–°: Phase 8.0 æ•°æ®åº“å…ˆè¡Œ âœ… å®Œæˆ (202,030 è¡Œè¿ç§», 17/17 éªŒè¯é€šè¿‡)*


