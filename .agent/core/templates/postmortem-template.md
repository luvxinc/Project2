# 事故复盘报告 (Post-Mortem)

> 路径: `.agent/projects/{project}/data/audits/YYYY-MM-DD_postmortem_{title}.md`
> 要求: P1/P2 事故后 **48 小时内**完成

---

## 事故摘要

| 字段 | 值 |
|------|----|
| 事故 ID | INC-{NNN} |
| 等级 | P0 / P1 / P2 |
| 开始时间 | YYYY-MM-DD HH:MM |
| 解决时间 | YYYY-MM-DD HH:MM |
| 持续时间 | {X} 小时 {Y} 分钟 |
| 影响范围 | {受影响的功能/用户数} |
| 撰写人 | {工程师/CTO} |

---

## 事故时间线

| 时间 | 事件 |
|------|------|
| HH:MM | 首次告警触发 / 用户报告 |
| HH:MM | 团队感知到问题 |
| HH:MM | 开始排查 |
| HH:MM | 识别根因 |
| HH:MM | 开始回滚/修复 |
| HH:MM | 服务恢复 |
| HH:MM | 确认完全恢复 |

---

## 根因分析 (5 Whys)

**问题现象**: {用户/监控看到的直接现象}

1. **Why**: {第一层原因}
2. **Why**: {第二层原因}
3. **Why**: {第三层原因}
4. **Why**: {第四层原因}
5. **Why (根因)**: {最终根本原因}

**根因分类**: 代码 Bug / 配置错误 / 基础设施 / 外部依赖 / 流程缺陷

---

## 影响评估

- 受影响用户数: ~{N}
- 受影响功能: {列表}
- 数据损失: 无 / 有（{描述}）
- SLA 影响: {是否违反 SLA}

---

## 改进措施

| # | 措施 | 类型 | 负责人 | 截止日期 |
|---|------|------|--------|---------|
| 1 | {预防类似事故的措施} | 代码/配置/监控/流程 | {工程师} | YYYY-MM-DD |
| 2 | {提高检测速度的措施} | 监控/告警 | {工程师} | YYYY-MM-DD |
| 3 | {减少影响范围的措施} | 架构/降级 | {工程师} | YYYY-MM-DD |

---

## 经验教训

{对团队最有价值的 1-3 条学习点}

---

## 后续跟踪

- ERROR-BOOK 条目: ERR-{NNN}（已记录）
- 改进措施跟踪: {改进措施的 Issue/任务链接}

---

*复盘完成时间: YYYY-MM-DD HH:MM*
