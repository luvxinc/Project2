# Refactor Fidelity Checklist（重构保真清单）

## 目标
重构只改架构，不改变业务语义与功能行为。

## A. 重构前（必须）
- [ ] 原实现像素级审计完成（入口/分支/异常/副作用）
- [ ] 老架构弱点清单已建立（性能瓶颈/安全漏洞/不合理设计）
- [ ] Unknown 列表已建立并清零路径明确
- [ ] 等价性矩阵已建立（旧 vs 新）

## B. 执行中（必须）
- [ ] 严格按计划切片执行（每片可验证）
- [ ] 禁止猜测/杜撰，未确认项标注 UNKNOWN
- [ ] 单片变更后立即增量验证

## C. 验证门禁（必须）
- [ ] 功能等价（输入/输出/副作用/错误语义）
- [ ] 权限与审计日志等价
- [ ] 性能无明显退化（或有说明）
- [ ] 老架构弱点修复清单已闭环（每项有证据）
- [ ] 消费者追溯与回归完成

## D. 收尾
- [ ] 计划文件删除（任务级）
- [ ] 保留审计结论与来源证据
- [ ] 写入 ERROR-BOOK / PROJECT-MEMORY（按分账本规则）
