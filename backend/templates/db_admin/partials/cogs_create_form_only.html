{% load security_tags %}
<!-- 新增产品向导专用表格 partial - 仅 HTML 结构，JS 逻辑在主页面 -->

<div class="fade-in">
    <div class="table-responsive mb-4">
        <table class="table table-dark table-hover align-middle" id="sku-create-table">
            <thead>
                <tr>
                    <th class="text-warning">SKU <span class="text-danger">*</span></th>
                    <th class="text-white-50">Category</th>
                    <th class="text-white-50">SubCategory</th>
                    <th class="text-white-50">Type</th>
                    <th class="text-info">Cost <span class="text-danger">*</span></th>
                    <th class="text-info">Freight <span class="text-danger">*</span></th>
                    <th class="text-warning">Weight <span class="text-danger">*</span></th>
                    <th class="text-success">Cog (Auto)</th>
                    <th class="text-primary" data-i18n="ui.text_2041">初始库存</th>
                    <th></th>
                </tr>
            </thead>
            <tbody id="sku-rows">
                <!-- 由主页面 JS 初始化生成 -->
            </tbody>
        </table>
    </div>

    <div class="mb-4">
        <button type="button" class="btn btn-outline-primary" onclick="addSkuRow()">
            <i class="fas fa-plus me-2"></i><span data-i18n="ui.icon_3001">添加一行</span>
        </button>
        <button type="button" class="btn btn-outline-secondary ms-2" onclick="addMultipleRows()">
            <i class="fas fa-layer-group me-2"></i><span data-i18n="modal.btn.confirm">批量添加 (5行)</span>
        </button>
    </div>
</div>

<!-- 传递后端数据到全局变量 -->
<script>
    window._createFormData = {
        categories: {{ categories | safe }},
        subcategories: {{ subcategories | safe }},
        types: {{ types | safe }},
        existingSkus: {{ existing_skus | safe }}
    };
    console.log('[CreateFormOnly] Data loaded, existingSkus:', window._createFormData.existingSkus.length);
</script>