<!-- Step 2: 模式选择 -->
<div class="wizard-step-content" id="send-step-mode-select" style="display: none;">
    <!-- 操作须知 -->
    <div class="alert alert-info mb-4">
        <div class="d-flex align-items-start">
            <i class="fas fa-info-circle me-3 mt-1 text-info"></i>
            <div>
                <strong class="text-info" data-i18n="common.operation_notes">操作须知</strong>
                <ul class="mb-0 mt-2 ps-3">
                    <li>请选择发货信息录入方式：<strong data-i18n="js.mode_manual">手动输入</strong>或<strong data-i18n="ui.text_865">Excel文件导入</strong></li>
                    <li data-i18n="ui.text_866">如选择Excel导入，请先在上一步下载模板并填写完整后上传</li>
                    <li data-i18n="ui.text_867">系统将自动验证上传文件的内容是否与模板一致</li>
                    <li data-i18n="ui.text_968">导入成功后，物流参数和发货明细将自动填充</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- 模式选择卡片 -->
    <div class="card bg-dark border-secondary mb-4">
        <div class="card-header bg-primary bg-opacity-10 border-secondary">
            <i class="fas fa-sliders-h me-2 text-primary"></i>
            <span class="text-white" data-i18n="ui.text_869">选择录入模式</span>
        </div>
        <div class="card-body">
            <div class="row g-4">
                <!-- 手动输入选项 -->
                <div class="col-md-6">
                    <div class="card h-100 bg-black bg-opacity-25 border-secondary mode-option-card" 
                         id="mode-manual-card" 
                         role="button" 
                         onclick="selectMode('manual')"
                         data-bs-toggle="tooltip"
                         data-i18n-title="tooltip.t7349" title="手动输入发货信息">
                        <div class="card-body text-center py-3">
                            <div class="mb-2">
                                <i class="fas fa-keyboard fa-3x text-info opacity-75"></i>
                            </div>
                            <h5 class="text-white mb-2" data-i18n="js.mode_manual">手动输入</h5>
                            <p class="text-white-50 small mb-3" data-i18n="ui.text_971">
                                逐步填写物流参数和发货明细
                            </p>
                            <div class="form-check d-inline-block">
                                <input class="form-check-input" type="radio" name="inputMode" id="mode-manual" value="manual">
                                <label class="form-check-label text-white-50" for="mode-manual" data-i18n="ui.text_872">选择此模式</label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Excel导入选项 -->
                <div class="col-md-6">
                    <div class="card h-100 bg-black bg-opacity-25 border-secondary mode-option-card" 
                         id="mode-excel-card" 
                         role="button" 
                         onclick="selectMode('excel')"
                         data-bs-toggle="tooltip"
                         data-i18n-title="tooltip.t4604" title="填写Excel文件导入发货信息">
                        <div class="card-body text-center py-3">
                            <div class="mb-2">
                                <i class="fas fa-file-excel fa-3x text-success opacity-75"></i>
                            </div>
                            <h5 class="text-white mb-2" data-i18n="ui.text_865">Excel文件导入</h5>
                            <p class="text-white-50 small mb-3" data-i18n="ui.text_974">
                                上传填写好的发货模板Excel文件
                            </p>
                            <div class="form-check d-inline-block">
                                <input class="form-check-input" type="radio" name="inputMode" id="mode-excel" value="excel">
                                <label class="form-check-label text-white-50" for="mode-excel" data-i18n="ui.text_872">选择此模式</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Excel上传区域（默认隐藏，选择Excel模式后显示） -->
    <div class="card bg-dark border-secondary mb-4" id="excel-upload-section" style="display: none;">
        <div class="card-header bg-success bg-opacity-10 border-secondary">
            <i class="fas fa-upload me-2 text-success"></i>
            <span class="text-white" data-i18n="modal.upload_send_template">上传发货模板</span>
        </div>
        <div class="card-body">
            <!-- GlobalFileUpload 组件容器 -->
            <div id="send-excel-upload-container"></div>
            
            <!-- 上传状态提示 -->
            <div id="upload-status" class="mt-3" style="display: none;">
                <div id="upload-loading" class="text-center py-3" style="display: none;">
                    <div class="spinner-border text-info" role="status"></div>
                    <p class="text-white-50 mt-2 mb-0" data-i18n="ui.text_877">正在验证文件...</p>
                </div>
                <div id="upload-success" class="alert alert-success mb-0" style="display: none;">
                    <i class="fas fa-check-circle me-2"></i>
                    <span id="upload-success-message" data-i18n="ui.text_878">文件验证成功！</span>
                </div>
                <div id="upload-error" class="alert alert-danger mb-0 p-3" style="display: none;">
                    <div id="upload-error-message" data-i18n="ui.text_2338">文件验证失败</div>
                </div>
            </div>
        </div>
    </div>

    <!-- 导航按钮 -->
    <div class="wizard-actions">
        <div class="wizard-actions-left">
            <button type="button" 
                    class="btn btn-outline-secondary btn-lg px-4 rounded-pill" 
                    id="btn-wizard-back-mode"
                    data-bs-toggle="tooltip"
                    data-i18n-title="common.back_prev" title="返回上一步">
                <i class="fas fa-arrow-left me-2"></i><span data-i18n="common.back">返回</span>
            </button>
        </div>
        <div class="wizard-actions-right">
            <button type="button" 
                    class="btn btn-success btn-lg px-5 shadow rounded-pill" 
                    id="btn-wizard-next-mode" 
                    disabled
                    data-bs-toggle="tooltip" 
                    data-i18n-title="tooltip.t6301" title="请先选择录入模式">
                <i class="fas fa-arrow-right me-2"></i><span data-i18n="common.next">下一步</span>
            </button>
        </div>
    </div>
</div>

<style>
    .mode-option-card {
        cursor: pointer;
        transition: all 0.3s ease;
        border-width: 2px !important;
    }
    .mode-option-card:hover {
        border-color: var(--bs-info) !important;
        transform: translateY(-3px);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    }
    .mode-option-card.selected {
        border-color: var(--bs-success) !important;
        background: rgba(25, 135, 84, 0.15) !important;
    }
    .mode-option-card.selected .form-check-input {
        background-color: var(--bs-success);
        border-color: var(--bs-success);
    }
</style>