<!-- Step 5: 检验商品数据 -->
<div id="po-step-verify-items" class="wizard-step-content">
    <!-- 验证状态卡片 -->
    <div class="card mb-4 state-normal" id="items-validation-card">
        <div class="card-header border-0 d-flex justify-content-between align-items-center">
            <div>
                <i class="fa-solid fa-shield-halved me-2 text-info" id="items-validation-icon"></i>
                <span id="items-validation-title" class="text-info" data-i18n="ui.text_851">商品数据验证</span>
            </div>
            <span class="badge bg-info bg-opacity-25 text-info" id="items-input-method-badge"></span>
        </div>
        <div class="card-body">
            <!-- 摘要信息 -->
            <div id="items-summary-content" class="mb-3 text-white"></div>
            
            <!-- 商品列表表格（带滚动条） -->
            <div class="table-responsive" style="max-height: 300px; overflow-y: auto;" id="items-preview-wrapper">
                <table class="table table-dark table-sm mb-0" id="items-preview-table">
                    <thead class="sticky-top" style="background: linear-gradient(135deg, rgba(13, 202, 240, 0.2), rgba(13, 110, 253, 0.15));">
                        <tr class="text-info small fw-bold">
                            <th style="width: 50px; border-bottom: 2px solid rgba(13, 202, 240, 0.5);">#</th>
                            <th style="border-bottom: 2px solid rgba(13, 202, 240, 0.5);">SKU</th>
                            <th style="width: 120px; border-bottom: 2px solid rgba(13, 202, 240, 0.5);" data-i18n="ui.text_2334">商品数量</th>
                            <th style="width: 150px; border-bottom: 2px solid rgba(13, 202, 240, 0.5);" data-i18n="ui.text_2335">产品单价</th>
                            <th style="width: 150px; border-bottom: 2px solid rgba(13, 202, 240, 0.5);" data-i18n="common.subtotal">小计</th>
                        </tr>
                    </thead>
                    <tbody id="items-preview-tbody">
                        <!-- 动态填充 -->
                    </tbody>
                    <tfoot class="sticky-bottom bg-dark">
                        <tr class="text-white border-top border-secondary fw-bold">
                            <td colspan="4" class="text-end" data-i18n="js.total_label">合计:</td>
                            <td id="items-preview-total" class="text-info">0.00</td>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </div>
    </div>
    
    <!-- 错误信息容器 -->
    <div id="items-errors-container" class="mb-4" style="display: none;">
        <div class="card bg-danger bg-opacity-10 border-danger">
            <div class="card-header bg-danger bg-opacity-20 border-0">
                <i class="fas fa-exclamation-triangle me-2 text-danger"></i>
                <span class="text-danger fw-bold" data-i18n="ui.text_852">商品数据校验未通过</span>
            </div>
            <div class="card-body">
                <!-- 错误明细列表（带滚动条） -->
                <div style="max-height: 200px; overflow-y: auto;">
                    <ul id="items-errors-list" class="mb-0 text-white"></ul>
                </div>
                <p class="text-white-50 small mt-3 mb-0">
                    <i class="fas fa-arrow-left me-1"></i><span data-i18n="shipping.return_to_fix">请返回上一步修正错误后再继续</span>
                </p>
            </div>
        </div>
    </div>
    
    <!-- SKU合并信息容器（橙色提示框） -->
    <div id="items-merge-container" class="mb-4" style="display: none;">
        <div class="card bg-warning bg-opacity-10 border-warning">
            <div class="card-header bg-warning bg-opacity-20 border-0">
                <i class="fas fa-compress-alt me-2 text-warning"></i>
                <span class="text-warning fw-bold" data-i18n="ui.text_675">数据一致性自动合并</span>
            </div>
            <div class="card-body">
                <p class="text-white-50 small mb-2">
                    <i class="fas fa-info-circle me-1"></i>
                    系统已自动将相同SKU且相同单价的记录合并，以确保数据一致性
                </p>
                <!-- 合并明细列表（带滚动条） -->
                <div style="max-height: 200px; overflow-y: auto;">
                    <ul id="items-merge-list" class="mb-0 text-white"></ul>
                </div>
            </div>
        </div>
    </div>

    <!-- 导航按钮 -->
    <div class="wizard-actions">
        <div class="wizard-actions-left">
            <button type="button" 
                    class="btn btn-outline-secondary btn-lg px-4 rounded-pill" 
                    id="btn-wizard-back-5" 
                    data-bs-toggle="tooltip" 
                    data-i18n-title="tooltip.t6326" title="返回修改商品">
                <i class="fas fa-arrow-left me-2"></i><span data-i18n="common.back_modify">返回修改</span>
            </button>
        </div>
        <div class="wizard-actions-right">
            <button type="button" 
                    class="btn btn-primary btn-lg px-5 shadow rounded-pill" 
                    id="btn-wizard-next-5" 
                    disabled 
                    data-bs-toggle="tooltip" 
                    data-i18n-title="tooltip.t7730" title="预览订单">
                <i class="fas fa-arrow-right me-2"></i><span data-i18n="ui.icon_3263">下一步：预览订单</span>
            </button>
        </div>
    </div>
</div>

<style>
    #items-preview-table thead {
        position: sticky;
        top: 0;
        z-index: 1;
    }
    #items-preview-table tbody tr.row-error {
        background: rgba(220, 53, 69, 0.15) !important;
    }
    #items-preview-table tbody tr.row-error td.cell-error {
        color: #dc3545 !important;
        font-weight: bold;
    }
    #items-preview-table tbody tr.row-valid {
        background: rgba(25, 135, 84, 0.08);
    }
</style>