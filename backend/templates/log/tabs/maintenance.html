<!-- log/tabs/maintenance.html - 日志维护 Tab -->
<div class="py-3">
    <!-- 开发模式状态及控制 -->
    <div class="d-flex align-items-center justify-content-between p-3 mb-4 rounded" style="background: rgba({% if stats.dev_mode %}255, 193, 7{% else %}25, 135, 84{% endif %}, 0.08); border: 1px solid rgba({% if stats.dev_mode %}255, 193, 7{% else %}25, 135, 84{% endif %}, 0.2);">
        <div class="d-flex align-items-center">
            <i class="fas {% if stats.dev_mode %}fa-code{% else %}fa-check-circle{% endif %} fa-lg me-3 text-{% if stats.dev_mode %}warning{% else %}success{% endif %}" style="opacity: 0.7;"></i>
            <div>
                <span class="text-white"><span data-i18n="log.mode.current">当前模式</span>：<strong class="text-{% if stats.dev_mode %}warning{% else %}success{% endif %}">{% if stats.dev_mode %}<span data-i18n="log.mode.dev">开发模式</span>{% else %}<span data-i18n="log.mode.prod">生产模式</span>{% endif %}</strong></span>
                <br>
                <small class="text-white-50">
                    {% if stats.dev_mode %}
                    <span data-i18n="log.mode.dev_note">所有新日志将标记为开发日志 (dev_mode=true)，发布前可清理。</span>
                    {% else %}
                    <span data-i18n="log.mode.prod_note">所有新日志将永久保留。</span>
                    {% endif %}
                </small>
            </div>
        </div>
        <button class="btn {% if stats.dev_mode %}btn-outline-success{% else %}btn-outline-warning{% endif %} btn-sm" onclick="toggleDevMode({% if stats.dev_mode %}false{% else %}true{% endif %})">
            <i class="fas {% if stats.dev_mode %}fa-toggle-on{% else %}fa-toggle-off{% endif %} me-1"></i>
            {% if stats.dev_mode %}<span data-i18n="log.mode.switch_to_prod">切换到生产模式</span>{% else %}<span data-i18n="log.mode.switch_to_dev">切换到开发模式</span>{% endif %}
        </button>
    </div>
    
    <!-- 日志统计 -->
    <div class="row g-3 mb-4">
        <div class="col-md-3">
            <div class="p-3 rounded" style="background: rgba(220, 53, 69, 0.06); border: 1px solid rgba(220, 53, 69, 0.15);">
                <div class="d-flex align-items-center mb-2">
                    <i class="fas fa-circle-xmark text-danger me-2" style="opacity: 0.6;"></i>
                    <span class="text-white-50 small" data-i18n="log.tabs.error">错误日志</span>
                </div>
                <div class="d-flex justify-content-between align-items-baseline">
                    <span class="text-white fs-4">{{ stats.error_total }}</span>
                    <small class="text-white-50">开发: <span class="text-warning">{{ stats.error_dev }}</span></small>
                </div>
            </div>
        </div>
        
        <div class="col-md-3">
            <div class="p-3 rounded" style="background: rgba(13, 110, 253, 0.06); border: 1px solid rgba(13, 110, 253, 0.15);">
                <div class="d-flex align-items-center mb-2">
                    <i class="fas fa-shield-halved text-primary me-2" style="opacity: 0.6;"></i>
                    <span class="text-white-50 small" data-i18n="log.tabs.audit">安全审计</span>
                </div>
                <div class="d-flex justify-content-between align-items-baseline">
                    <span class="text-white fs-4">{{ stats.audit_total }}</span>
                    <small class="text-white-50">开发: <span class="text-warning">{{ stats.audit_dev }}</span></small>
                </div>
            </div>
        </div>
        
        <div class="col-md-3">
            <div class="p-3 rounded" style="background: rgba(25, 135, 84, 0.06); border: 1px solid rgba(25, 135, 84, 0.15);">
                <div class="d-flex align-items-center mb-2">
                    <i class="fas fa-clipboard-list text-success me-2" style="opacity: 0.6;"></i>
                    <span class="text-white-50 small" data-i18n="log.tabs.business">业务操作</span>
                </div>
                <div class="d-flex justify-content-between align-items-baseline">
                    <span class="text-white fs-4">{{ stats.business_total }}</span>
                    <small class="text-white-50">开发: <span class="text-warning">{{ stats.business_dev }}</span></small>
                </div>
            </div>
        </div>
        
        <div class="col-md-3">
            <div class="p-3 rounded" style="background: rgba(13, 202, 240, 0.06); border: 1px solid rgba(13, 202, 240, 0.15);">
                <div class="d-flex align-items-center mb-2">
                    <i class="fas fa-globe text-info me-2" style="opacity: 0.6;"></i>
                    <span class="text-white-50 small" data-i18n="log.tabs.access">访问日志</span>
                </div>
                <div class="d-flex justify-content-between align-items-baseline">
                    <span class="text-white fs-4">{{ stats.access_total }}</span>
                    <small class="text-white-50">开发: <span class="text-warning">{{ stats.access_dev }}</span></small>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 开发日志汇总 -->
    {% if stats.dev_total > 0 %}
    <div class="p-3 mb-4 rounded" style="background: rgba(255, 193, 7, 0.06); border: 1px solid rgba(255, 193, 7, 0.2);">
        <div class="d-flex align-items-center justify-content-between mb-2">
            <div class="d-flex align-items-center">
                <i class="fas fa-exclamation-triangle text-warning me-2" style="opacity: 0.7;"></i>
                <span class="text-white" data-i18n="ui.text_1156">开发日志汇总</span>
            </div>
            <button class="btn btn-warning btn-sm" onclick="clearDevLogs()">
                <i class="fas fa-trash-alt me-1"></i><span data-i18n="log.clear_dev_logs">清理开发日志</span>
            </button>
        </div>
        <p class="text-white-50 mb-0 ps-4">
            当前共有 <strong class="text-warning">{{ stats.dev_total }}</strong> 条开发模式日志。
            如果准备发布上线，建议先清理这些日志。
        </p>
    </div>
    {% else %}
    <div class="p-3 mb-4 rounded" style="background: rgba(25, 135, 84, 0.06); border: 1px solid rgba(25, 135, 84, 0.2);">
        <div class="d-flex align-items-center">
            <i class="fas fa-check-circle text-success me-2" style="opacity: 0.7;"></i>
            <span class="text-white" data-i18n="ui.text_1157">没有开发日志</span>
        </div>
        <p class="text-white-50 mb-0 ps-4 small" data-i18n="ui.text_1158">
            所有日志均为生产环境数据，可以放心发布上线。
        </p>
    </div>
    {% endif %}
    
    <!-- 维护操作 -->
    <div class="rounded" style="background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(255, 255, 255, 0.08);">
        <div class="px-4 py-3" style="border-bottom: 1px solid rgba(255, 255, 255, 0.08);">
            <div class="d-flex align-items-center">
                <i class="fas fa-gear text-white-50 me-2"></i>
                <span class="text-white" data-i18n="ui.text_1159">维护操作</span>
            </div>
        </div>
        <div class="p-4">
            <div class="row g-4">
                <div class="col-md-6">
                    <div class="p-3 rounded" style="background: rgba(0, 0, 0, 0.2);">
                        <h6 class="text-white-50 mb-3"><i class="fas fa-calendar-alt me-2"></i><span data-i18n="ui.icon_3357">日志清理策略</span></h6>
                        <ul class="mb-0 small text-white-50 ps-3">
                            <li class="mb-1"><code class="text-info">log_access</code>: 保留 30 天</li>
                            <li class="mb-1"><code class="text-info">log_business</code>: 保留 90 天</li>
                            <li class="mb-1"><code class="text-info">log_error</code>: <span class="text-white" data-i18n="ui.text_1160">永久保留</span></li>
                            <li class="mb-0"><code class="text-info">log_audit</code>: <span class="text-white" data-i18n="ui.text_1160">永久保留</span></li>
                        </ul>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="p-3 rounded" style="background: rgba(0, 0, 0, 0.2);">
                        <h6 class="text-white-50 mb-3"><i class="fas fa-terminal me-2"></i><span data-i18n="ui.icon_3358">命令行工具</span></h6>
                        <ul class="mb-0 small text-white-50 ps-3">
                            <li class="mb-1"><code class="text-info">python manage.py log_maintenance</code> - <span data-i18n="ui.execute">执行</span>日志清理</li>
                            <li class="mb-0"><code class="text-info">python manage.py clear_dev_logs --confirm</code> - 清理开发日志</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
