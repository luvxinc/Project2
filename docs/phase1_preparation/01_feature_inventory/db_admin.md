# æ•°æ®åº“è¿ç»´æ¨¡å— (DB Admin Module)

## æ¨¡å—è·¯å¾„
- **Django App**: `backend/apps/db_admin/`
- **URL Prefix**: `/dashboard/db_admin/`
- **æƒé™å‰ç¼€**: `module.db_admin.*`

## å­æ¨¡å—æ¸…å•

### 1. æ•°æ®å¤‡ä»½ (Backup)
**è·¯å¾„**: `/dashboard/db_admin/backup/`
**æƒé™**: `module.db_admin.backup.create`

| åŠŸèƒ½ | ç±»å‹ | ä¼˜å…ˆçº§ | å½“å‰å®ç° |
|------|------|--------|----------|
| åˆ›å»ºå¤‡ä»½ | API | P0 | mysqldump |
| å¤‡ä»½æ ‡ç­¾ | è¡¨å• | P1 | è‡ªå®šä¹‰å‘½å |

**å…³é”®ç›®å½•**:
- `data/backups/db/` - å¤‡ä»½æ–‡ä»¶

**å¤æ‚åº¦**: ğŸŸ¢ ä½

---

### 2. æ•°æ®æ¢å¤ (Restore)
**è·¯å¾„**: `/dashboard/db_admin/restore/`
**æƒé™**: `module.db_admin.backup.restore`

| åŠŸèƒ½ | ç±»å‹ | ä¼˜å…ˆçº§ | å½“å‰å®ç° |
|------|------|--------|----------|
| é€‰æ‹©å¤‡ä»½æ–‡ä»¶ | è¡¨å• | P0 | æ–‡ä»¶åˆ—è¡¨ |
| æ‰§è¡Œæ¢å¤ | API | P0 | mysql å¯¼å…¥ |
| æ¢å¤ç¡®è®¤ | å‰ç«¯ | P0 | äºŒæ¬¡ç¡®è®¤ |

**å¤æ‚åº¦**: ğŸŸ¡ ä¸­ç­‰ (é«˜å±æ“ä½œ)

---

### 3. å¤‡ä»½ç®¡ç† (Manage)
**è·¯å¾„**: `/dashboard/db_admin/manage/`
**æƒé™**: `module.db_admin.backup.manage`

| åŠŸèƒ½ | ç±»å‹ | ä¼˜å…ˆçº§ | å½“å‰å®ç° |
|------|------|--------|----------|
| å¤‡ä»½åˆ—è¡¨ | é¡µé¢ | P0 | è¡¨æ ¼ |
| åˆ é™¤å¤‡ä»½ | API | P1 | å•ä¸ª/æ‰¹é‡ |
| ä¸‹è½½å¤‡ä»½ | API | P2 | æ–‡ä»¶ä¸‹è½½ |

**å¤æ‚åº¦**: ğŸŸ¢ ä½

---

### 4. æ•°æ®æ¸…æ´— (Cleanup)
**è·¯å¾„**: `/dashboard/db_admin/clean/`
**æƒé™**: `module.db_admin.cleanup.delete`

| åŠŸèƒ½ | ç±»å‹ | ä¼˜å…ˆçº§ | å½“å‰å®ç° |
|------|------|--------|----------|
| é€‰æ‹©æ—¥æœŸèŒƒå›´ | è¡¨å• | P1 | Date Picker |
| é¢„è§ˆå½±å“ | API | P1 | ç»Ÿè®¡æ•°é‡ |
| æ‰§è¡Œæ¸…æ´— | API | P1 | ç‰©ç†åˆ é™¤ |
| å®‰å…¨éªŒè¯ | å‰ç«¯ | P0 | L4 å¯†ç  |

**å¤æ‚åº¦**: ğŸŸ¡ ä¸­ç­‰ (é«˜å±æ“ä½œ)

---

### 5. æ•°æ®ä¿®æ”¹ä¸­å¿ƒ (Data Change)
**è·¯å¾„**: `/dashboard/db_admin/data_change/`
**æƒé™**: `module.inventory.stocktake.modify`, `module.products.catalog.*`

| åŠŸèƒ½ | ç±»å‹ | ä¼˜å…ˆçº§ | å½“å‰å®ç° |
|------|------|--------|----------|
| åº“å­˜ä¿®æ”¹å‘å¯¼ | 3 æ­¥ Wizard | P1 | å•å€¼ä¿®æ”¹ |
| åˆ é™¤åº“å­˜åˆ— | API | P2 | é«˜å±æ“ä½œ |
| COGS ç»´æŠ¤ | Inline Edit | P0 | è¡¨æ ¼ |
| æ–°å¢ SKU | 3 æ­¥ Wizard | P0 | V2.2 |

**å¤æ‚åº¦**: ğŸŸ¡ ä¸­ç­‰

---

## API ç«¯ç‚¹æ¸…å•

| Method | Path | åŠŸèƒ½ | ä¼˜å…ˆçº§ |
|--------|------|------|--------|
| GET | `/db_admin/` | Hub é¡µé¢ | P0 |
| GET | `/db_admin/backup/` | å¤‡ä»½é¡µé¢ | P0 |
| POST | `/db_admin/backup/create/` | åˆ›å»ºå¤‡ä»½ | P0 |
| GET | `/db_admin/restore/` | æ¢å¤é¡µé¢ | P0 |
| POST | `/db_admin/restore/execute/` | æ‰§è¡Œæ¢å¤ | P0 |
| GET | `/db_admin/manage/` | ç®¡ç†é¡µé¢ | P0 |
| POST | `/db_admin/manage/delete/` | åˆ é™¤å¤‡ä»½ | P1 |
| GET | `/db_admin/clean/` | æ¸…æ´—é¡µé¢ | P1 |
| POST | `/db_admin/clean/verify/` | é¢„è§ˆæ¸…æ´— | P1 |
| POST | `/db_admin/clean/execute/` | æ‰§è¡Œæ¸…æ´— | P1 |

---

## è¿ç§»æ³¨æ„äº‹é¡¹

### å¤æ‚åº¦è¯„ä¼°: ğŸŸ¢ ä½-ä¸­ç­‰

| é£é™©ç‚¹ | è¯´æ˜ | è§£å†³æ–¹æ¡ˆ |
|--------|------|----------|
| æ•°æ®åº“å¤‡ä»½ | ä¾èµ– mysqldump | æ”¹ç”¨ pg_dump |
| é«˜å±æ“ä½œ | éœ€è¦å¤šé‡éªŒè¯ | ä¿ç•™å®‰å…¨ç­–ç•¥ |

### å»ºè®®è¿ç§»é¡ºåº
1. å…ˆè¿ç§» Manage (åªè¯»)
2. å†è¿ç§» Backup (ä½é£é™©)
3. ç„¶å Restore (é«˜å±)
4. æœ€å Cleanup + Data Change

---

*Last Updated: 2026-02-04*
