# é‡‡è´­æ¨¡å— (Purchase Module)

## æ¨¡å—è·¯å¾„
- **Django App**: `backend/apps/purchase/`
- **URL Prefix**: `/dashboard/purchase/`
- **æƒé™å‰ç¼€**: `module.purchase.*`

## å­æ¨¡å—æ¸…å•

### 1. ä¾›åº”å•†ç®¡ç† (Supplier)
**è·¯å¾„**: `/dashboard/purchase/supplier/`
**æƒé™**: `module.purchase.supplier.add`, `module.purchase.supplier.strategy`

| åŠŸèƒ½ | ç±»å‹ | ä¼˜å…ˆçº§ | å½“å‰å®ç° |
|------|------|--------|----------|
| æ–°å¢ä¾›åº”å•† | é¡µé¢ + Wizard | P0 | 4 æ­¥å‘å¯¼ |
| ä¾›åº”å•†åˆ—è¡¨ | é¡µé¢ | P0 | HTMX è¡¨æ ¼ |
| ç­–ç•¥ç®¡ç† | é¡µé¢ + Wizard | P0 | å®šä¹‰ SKU ä»·æ ¼/æ±‡ç‡ |
| ç¼–è¾‘ç­–ç•¥ | API | P0 | Inline Edit |
| åˆ é™¤ç­–ç•¥ | API | P1 | è½¯åˆ é™¤ |

**å…³é”®è¡¨**:
- `in_supplier` - ä¾›åº”å•†ä¸»è¡¨
- `in_supplier_strategy` - ä¾›åº”å•† SKU ç­–ç•¥ (ä»·æ ¼/æ±‡ç‡/æœ‰æ•ˆæœŸ)

**å¤æ‚åº¦**: ğŸŸ¢ ä½

---

### 2. é‡‡è´­è®¢å•åˆ›å»º (PO Create)
**è·¯å¾„**: `/dashboard/purchase/po/add/`
**æƒé™**: `module.purchase.po.add`

| åŠŸèƒ½ | ç±»å‹ | ä¼˜å…ˆçº§ | å½“å‰å®ç° |
|------|------|--------|----------|
| åˆ›å»º PO å‘å¯¼ | 5 æ­¥ Wizard | P0 | å¤šæ­¥è¡¨å• |
| é€‰æ‹©ä¾›åº”å•† | Step 1 | P0 | Dropdown |
| é€‰æ‹© SKU + æ•°é‡ | Step 2 | P0 | åŠ¨æ€è¡¨æ ¼ |
| è‡ªåŠ¨è®¡ç®—é‡‘é¢ | Step 3 | P0 | å®æ—¶è®¡ç®— |
| é¢„è§ˆç¡®è®¤ | Step 4 | P0 | é¢„è§ˆé¡µ |
| ç”Ÿæˆ PO ç¼–å· | Step 5 | P0 | è‡ªåŠ¨ç”Ÿæˆ |

**å…³é”®è¡¨**:
- `in_po_input` - PO ä¸»è¡¨
- `in_po_input_items` - PO æ˜ç»†è¡¨
- `in_po_final` - PO ç»ˆæ€

**å¤æ‚åº¦**: ğŸ”´ é«˜ (å¤šæ­¥éª¤çŠ¶æ€ç®¡ç†)

---

### 3. é‡‡è´­è®¢å•ç®¡ç† (PO Management)
**è·¯å¾„**: `/dashboard/purchase/po/mgmt/`
**æƒé™**: `module.purchase.po.mgmt`

| åŠŸèƒ½ | ç±»å‹ | ä¼˜å…ˆçº§ | å½“å‰å®ç° |
|------|------|--------|----------|
| PO åˆ—è¡¨ | é¡µé¢ | P0 | åˆ†é¡µè¡¨æ ¼ |
| PO è¯¦æƒ… | é¡µé¢ | P0 | è¯¦æƒ…é¡µ |
| PO ç¼–è¾‘ | 5 æ­¥ Wizard | P0 | å®Œæ•´ç¼–è¾‘æµç¨‹ |
| PO åˆ é™¤ | API | P1 | è½¯åˆ é™¤ |
| å†å²ç‰ˆæœ¬ | é¡µé¢ | P1 | ç‰ˆæœ¬å¯¹æ¯” |
| å¯¼å‡ºå‘ç¥¨ | API | P1 | PDF ç”Ÿæˆ |

**å¤æ‚åº¦**: ğŸŸ¡ ä¸­ç­‰

---

### 4. å‘è´§ç®¡ç† (Send/Shipment)
**è·¯å¾„**: `/dashboard/purchase/send/`
**æƒé™**: `module.purchase.send.add`, `module.purchase.send.mgmt`

| åŠŸèƒ½ | ç±»å‹ | ä¼˜å…ˆçº§ | å½“å‰å®ç° |
|------|------|--------|----------|
| åˆ›å»ºå‘è´§å• | 6 æ­¥ Wizard | P0 | å¤šæ­¥è¡¨å• |
| é€‰æ‹© PO | Step 1 | P0 | ä¸‹æ‹‰é€‰æ‹© |
| å¡«å†™å‘è´§ä¿¡æ¯ | Step 2-5 | P0 | è¡¨å• |
| å‘è´§å•ç®¡ç† | é¡µé¢ | P0 | åˆ—è¡¨ + è¯¦æƒ… |
| ç¼–è¾‘å‘è´§å• | Wizard | P0 | å®Œæ•´ç¼–è¾‘ |
| åˆ é™¤å‘è´§å• | API | P1 | è½¯åˆ é™¤ |

**å…³é”®è¡¨**:
- `in_send_input` - å‘è´§ä¸»è¡¨
- `in_send_input_items` - å‘è´§æ˜ç»†
- `in_send_final` - å‘è´§ç»ˆæ€

**å¤æ‚åº¦**: ğŸ”´ é«˜

---

### 5. æ”¶è´§å…¥åº“ (Receive)
**è·¯å¾„**: `/dashboard/purchase/receive/`
**æƒé™**: `module.purchase.receive`, `module.purchase.receive.mgmt`

| åŠŸèƒ½ | ç±»å‹ | ä¼˜å…ˆçº§ | å½“å‰å®ç° |
|------|------|--------|----------|
| å…¥åº“ç™»è®° | é¡µé¢ | P0 | æ‰«ç /æ‰‹åŠ¨ |
| é€‰æ‹©å‘è´§å• | Step 1 | P0 | ä¸‹æ‹‰ |
| ç¡®è®¤å…¥åº“æ•°é‡ | Step 2 | P0 | è¡¨æ ¼ |
| å…¥åº“ç®¡ç† | é¡µé¢ | P0 | åˆ—è¡¨ + è¯¦æƒ… |
| ä¸Šä¼ å‡­è¯ | API | P1 | æ–‡ä»¶ä¸Šä¼  |

**å…³é”®è¡¨**:
- `in_receive_input` - å…¥åº“ä¸»è¡¨
- `in_receive_input_items` - å…¥åº“æ˜ç»†
- `in_receive_final` - å…¥åº“ç»ˆæ€

**å¤æ‚åº¦**: ğŸŸ¡ ä¸­ç­‰

---

### 6. å¼‚å¸¸å¤„ç† (Abnormal)
**è·¯å¾„**: `/dashboard/purchase/abnormal/`
**æƒé™**: `module.purchase.abnormal.manage`

| åŠŸèƒ½ | ç±»å‹ | ä¼˜å…ˆçº§ | å½“å‰å®ç° |
|------|------|--------|----------|
| å¼‚å¸¸åˆ—è¡¨ | é¡µé¢ | P0 | ç­›é€‰è¡¨æ ¼ |
| å¤„ç†å¼‚å¸¸ | å¼¹çª— | P0 | Modal + Form |
| å¼‚å¸¸ç±»å‹é€‰æ‹© | è¡¨å• | P0 | Dropdown |

**å¤æ‚åº¦**: ğŸŸ¢ ä½

---

## API ç«¯ç‚¹æ¸…å• (éƒ¨åˆ†)

| Method | Path | åŠŸèƒ½ | ä¼˜å…ˆçº§ |
|--------|------|------|--------|
| GET | `/purchase/` | Hub é¡µé¢ | P0 |
| GET | `/purchase/supplier/add/` | æ–°å¢ä¾›åº”å•† | P0 |
| POST | `/purchase/supplier/add/submit/` | æäº¤ä¾›åº”å•† | P0 |
| GET | `/purchase/po/add/` | PO åˆ›å»ºå‘å¯¼ | P0 |
| POST | `/purchase/po/add/step2/` | åŠ è½½ Step 2 | P0 |
| POST | `/purchase/po/add/submit/` | æäº¤ PO | P0 |
| GET | `/purchase/po/mgmt/` | PO åˆ—è¡¨ | P0 |
| GET | `/purchase/po/mgmt/<id>/` | PO è¯¦æƒ… | P0 |
| POST | `/purchase/po/mgmt/<id>/edit/` | ç¼–è¾‘ PO | P0 |
| ... | ... | (çº¦ 45 ä¸ªç«¯ç‚¹) | ... |

---

## è¿ç§»æ³¨æ„äº‹é¡¹

### å¤æ‚åº¦è¯„ä¼°: ğŸ”´ é«˜

| é£é™©ç‚¹ | è¯´æ˜ | è§£å†³æ–¹æ¡ˆ |
|--------|------|----------|
| å¤šæ­¥ Wizard | çŠ¶æ€ç®¡ç†å¤æ‚ | ç”¨ React Context æˆ– Zustand |
| å®æ—¶è®¡ç®— | é‡‘é¢/æ•°é‡è”åŠ¨ | å‰ç«¯è®¡ç®— + åç«¯æ ¡éªŒ |
| æ–‡ä»¶ä¸Šä¼  | PDF/å›¾ç‰‡å‡­è¯ | S3 å­˜å‚¨ |
| å…³è”æ•°æ® | PO â†’ Send â†’ Receive | ä¿æŒå¤–é”®ä¸€è‡´æ€§ |

### å»ºè®®è¿ç§»é¡ºåº
1. å…ˆè¿ç§» Supplier (æœ€ç®€å•)
2. å†è¿ç§» Abnormal (ç‹¬ç«‹)
3. ç„¶å PO Create + PO Mgmt (æ ¸å¿ƒ)
4. æœ€å Send + Receive (ä¾èµ– PO)

---

*Last Updated: 2026-02-04*
