# 风险评估

## 风险矩阵

| 风险 | 可能性 | 影响 | 等级 | 缓解措施 |
|------|--------|------|------|----------|
| 开发周期膨胀 | 高 | 高 | 🔴 | 设定硬性 Deadline |
| 技术栈学习曲线 | 中 | 中 | 🟡 | MVP 验证期 |
| 数据迁移失败 | 低 | 高 | 🟡 | 多次测试 + 回滚方案 |
| 功能遗漏 | 中 | 中 | 🟡 | 完整功能清单 |
| 新系统性能问题 | 低 | 中 | 🟢 | 性能测试 |
| 老系统需要更新 | 中 | 高 | 🔴 | 冻结老系统功能 |

---

## 风险详细分析

### R1: 开发周期膨胀 🔴

**描述**: 预估的开发时间几乎必然会超出预期

**根因分析**:
- 对新技术栈不熟悉
- 需求变更
- 边界情况处理
- 集成问题

**缓解措施**:
1. 设定硬性 Deadline (2026-08-31)
2. 每月检查点评审
3. 如超期 2 周，启动止损评估
4. 宁可功能少，也要按时完成

**应急方案**:
- 降低功能优先级 (P1 → P2)
- 部分模块延后实现
- 保持老系统可用

---

### R2: 技术栈学习曲线 🟡

**描述**: NestJS/React/Prisma 与 Django 差异较大

**根因分析**:
- TypeScript 严格类型
- React 状态管理
- NestJS 依赖注入
- Prisma 查询语法

**缓解措施**:
1. Phase 2 为技术验证期
2. 从简单模块开始
3. 利用 AI 辅助编码
4. 有问题及时搜索/学习

**应急方案**:
- Phase 2 结束时评估继续/止损
- 如过于困难，回退到 Django 演进方案

---

### R3: 数据迁移失败 🟡

**描述**: 老数据无法正确迁移到新系统

**根因分析**:
- Schema 不兼容
- 数据脏/异常值
- 关联关系丢失
- 编码问题

**缓解措施**:
1. 设计 Schema 时考虑向后兼容
2. 编写详细的数据映射文档
3. 迁移脚本多次测试
4. 分批迁移，验证后继续

**应急方案**:
- 保留老数据库只读副本
- 手动修复问题数据
- 切换后保留回滚能力

---

### R4: 功能遗漏 🟡

**描述**: 新系统缺少老系统的某些功能

**根因分析**:
- 功能清单不完整
- 边界功能未记录
- 用户习惯的隐藏功能
- 权限/安全功能遗漏

**缓解措施**:
1. 完整的功能清单 (已创建)
2. 按模块逐一对照
3. 灰度期收集用户反馈
4. 预留 Bug 修复时间

**应急方案**:
- 切换后发现问题，快速修复
- 严重问题回滚到老系统

---

### R5: 老系统需要更新 🔴

**描述**: 迁移期间业务要求老系统添加新功能

**根因分析**:
- 业务需求无法等待
- 紧急 Bug 修复
- 外部系统集成

**缓解措施**:
1. **严格冻结老系统**：只修 Bug，不加功能
2. 新需求记录到新系统待办
3. 如必须添加，评估对迁移的影响

**应急方案**:
- 如老系统必须更新，同步更新新系统设计
- 严重情况下，暂停迁移专注业务

---

## 决策树

```
MVP 完成?
├── 是 → 继续 Phase 3
│       └── 6 月底 Check: 核心模块完成?
│           ├── 是 → 继续
│           └── 否 → 止损 or 延期评估
└── 否 → 止损，回退 Django 演进方案

切换准备完成?
├── 是 → 灰度上线
│       └── 2 周后: 用户反馈正常?
│           ├── 是 → 全量切换
│           └── 否 → 修复 or 回滚
└── 否 → 延期评估
```

---

## 止损标准

以下情况必须触发止损评估：

| 触发条件 | 处理方式 |
|----------|----------|
| Phase 2 MVP 未完成 | 回退 Django 演进方案 |
| 任一里程碑延期 > 2 周 | 评估是否调整计划 |
| 无法解决的技术障碍 | 放弃相关功能或回退 |
| 业务强制老系统更新 | 暂停迁移，处理业务 |
| 团队精力不足 | 延长周期或缩小范围 |

---

*Last Updated: 2026-02-04*
